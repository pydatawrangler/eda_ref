---
title: "Chapter 13 - Logical Vectors"
subtitle: "R 4 Data Science"
author: "Tom Madsen"
format:
  html: 
    self-contained: true
    toc: true
---

## 13.1 Introduction

### 13.1.1 Prerequisites
```{r}
library(tidyverse)
library(nycflights13)
```
```{r}
x <- c(1, 2, 3, 5, 7, 11, 13)
x * 2
```
```{r}
df <- tibble(x)
df |> 
  mutate(y = x * 2)
```

## 13.2 Comparisons
```{r}
flights |> 
  filter(dep_time > 600 & dep_time < 2000 & abs(arr_delay) < 20)
```
```{r}
flights |> 
  mutate(
    daytime = dep_time > 600 & dep_time < 2000,
    approx_ontime = abs(arr_delay) < 20,
    .keep = "used"
  )
```
```{r}
flights |> 
  mutate(
    daytime = dep_time > 600 & dep_time < 2000,
    approx_ontime = abs(arr_delay) < 20,
  ) |> 
  filter(daytime & approx_ontime)
  
```

### 13.2.1 Floating point comparision
```{r}
x <- c(1 / 49 * 49, sqrt(2) ^ 2)
x
```
```{r}
x == c(1, 2)
```
```{r}
print(x, digits = 16)
```
```{r}
near(x, c(1, 2))
```

### 13.2.2 Missing values
```{r}
NA > 5
10 == NA
NA == NA
```

### 13.2.3 `is.na()`
```{r}
is.na(c(TRUE, NA, FALSE))
is.na(c(1, NA, 3))
is.na(c("a", NA, "b"))
```
```{r}
flights |> 
  filter(is.na(dep_time))
```
```{r}
flights |> 
  filter(month == 1, day == 1) |> 
  arrange(desc(is.na(dep_time)), dep_time)
```

## 13.3 Boolean algebra

### 13.3.1 Missing values
```{r}
df <- tibble(x = c(TRUE, FALSE, NA))

df |>
  mutate(
    and = x & NA,
    or = x | NA
  )
```

### 13.3.2 Order of operations

```{r}
flights |>
  filter(month == 11 | month == 12)

flights |>
  mutate(
    nov = month == 11,
    final = nov | 12,
    .keep = "used"
  ) |>
  filter(nov == TRUE)
```

### 13.3.3 `%in%`

```{r}

```









